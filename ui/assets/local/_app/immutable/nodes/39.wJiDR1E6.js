import{s as K,e as j,b as S,d as C,g as $,k as I,c as U,v as m,S as x,a as W,h as L,j as B,l as D,T as ee,x as z,y as te,t as O,f as R}from"../chunks/scheduler.LRpOgQOC.js";import{S as M,i as X,t as g,b as _,c as k,a as b,m as w,d as v,f as ne,g as oe,e as re}from"../chunks/index.dE1eZLcR.js";import{p as Y}from"../chunks/stores.94z3PgvV.js";import{P as le}from"../chunks/page-title.ZsHOm3Zs.js";import{t as q}from"../chunks/translate.HrioCK44.js";import{W as ae}from"../chunks/workflow-padded-layout.Ki46ewJW.js";import{h as F,u as Z}from"../chunks/await_block.4HnXJsya.js";import{e as A}from"../chunks/each._Tp_Nd1G.js";import{B as se}from"../chunks/button.ZmhhIjNl.js";import{C as ce}from"../chunks/code-block.rA3r9ZVt.js";import{E as fe}from"../chunks/empty-state.hn38KSZ0.js";import{L as ie}from"../chunks/loading.fe0eU3fG.js";import{S as ue,a as me}from"../chunks/simple-select.55dQItbP.js";import{T as pe}from"../chunks/toggle-switch.C3rOFOTl.js";import{a as $e,b as ge}from"../chunks/query-service.EcoWXHDu.js";import{a as _e}from"../chunks/auth-user.Ok1yB-ne.js";import{s as de}from"../chunks/parse-with-big-int.e3oI4SEy.js";function G(r){const t=typeof r[15]!="string"?de(r[15]):r[15];r[16]=t}function H(r,t,o){const e=r.slice();return e[17]=t[o],e}function he(r){var e,n;let t,o;return t=new fe({props:{title:q("common.error-occurred"),content:q("workflows.no-workers-running-message"),error:(n=(e=r[20])==null?void 0:e.body)==null?void 0:n.message}}),{c(){k(t.$$.fragment)},l(l){b(t.$$.fragment,l)},m(l,a){w(t,l,a),o=!0},p:m,i(l){o||(g(t.$$.fragment,l),o=!0)},o(l){_(t.$$.fragment,l),o=!1},d(l){v(t,l)}}}function ke(r){let t,o,e,n,l,a,f,s,i,y,d,E,T;function Q(c){r[5](c)}let N={id:"query-select",label:q("workflows.query-type"),"data-testid":"query-select",$$slots:{default:[we]},$$scope:{ctx:r}};r[0]!==void 0&&(N.value=r[0]),e=new ue({props:N}),x.push(()=>ne(e,"value",Q)),a=new se({props:{leadingIcon:"retry",loading:je,$$slots:{default:[ve]},$$scope:{ctx:r}}}),a.$on("click",r[6]),i=new pe({props:{label:q("workflows.json-formatting"),labelPosition:"left",id:"json-formatting",checked:r[2]}}),i.$on("change",r[7]);let p={ctx:r,current:null,token:null,hasCatch:!1,pending:qe,then:Ie,catch:ye,value:15,blocks:[,,,]};return F(E=r[1],p),{c(){t=j("div"),o=j("div"),k(e.$$.fragment),l=W(),k(a.$$.fragment),f=W(),s=j("div"),k(i.$$.fragment),y=W(),d=j("div"),p.block.c(),this.h()},l(c){t=S(c,"DIV",{class:!0});var u=C(t);o=S(u,"DIV",{class:!0});var h=C(o);b(e.$$.fragment,h),l=L(h),b(a.$$.fragment,h),h.forEach($),f=L(u),s=S(u,"DIV",{class:!0});var P=C(s);b(i.$$.fragment,P),P.forEach($),u.forEach($),y=L(c),d=S(c,"DIV",{class:!0});var V=C(d);p.block.l(V),V.forEach($),this.h()},h(){B(o,"class","flex items-center gap-4"),B(s,"class","flex justify-end"),B(t,"class","flex justify-between"),B(d,"class","my-2 flex h-full items-start")},m(c,u){I(c,t,u),D(t,o),w(e,o,null),D(o,l),w(a,o,null),D(t,f),D(t,s),w(i,s,null),I(c,y,u),I(c,d,u),p.block.m(d,p.anchor=null),p.mount=()=>d,p.anchor=null,T=!0},p(c,u){r=c;const h={};u&2097152&&(h.$$scope={dirty:u,ctx:r}),!n&&u&1&&(n=!0,h.value=r[0],ee(()=>n=!1)),e.$set(h);const P={};u&2097152&&(P.$$scope={dirty:u,ctx:r}),a.$set(P);const V={};u&4&&(V.checked=r[2]),i.$set(V),p.ctx=r,u&2&&E!==(E=r[1])&&F(E,p)||Z(p,r,u)},i(c){T||(g(e.$$.fragment,c),g(a.$$.fragment,c),g(i.$$.fragment,c),g(p.block),T=!0)},o(c){_(e.$$.fragment,c),_(a.$$.fragment,c),_(i.$$.fragment,c);for(let u=0;u<3;u+=1){const h=p.blocks[u];_(h)}T=!1},d(c){c&&($(t),$(y),$(d)),v(e),v(a),v(i),p.block.d(),p.token=null,p=null}}}function be(r){let t=r[17]+"",o;return{c(){o=O(t)},l(e){o=R(e,t)},m(e,n){I(e,o,n)},p:m,d(e){e&&$(o)}}}function J(r){let t,o;return t=new me({props:{value:r[17],$$slots:{default:[be]},$$scope:{ctx:r}}}),{c(){k(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,n){w(t,e,n),o=!0},p(e,n){const l={};n&2097152&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){_(t.$$.fragment,e),o=!1},d(e){v(t,e)}}}function we(r){let t,o,e=A(r[14]),n=[];for(let a=0;a<e.length;a+=1)n[a]=J(H(r,e,a));const l=a=>_(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();t=z()},l(a){for(let f=0;f<n.length;f+=1)n[f].l(a);t=z()},m(a,f){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(a,f);I(a,t,f),o=!0},p(a,f){if(f&8){e=A(a[14]);let s;for(s=0;s<e.length;s+=1){const i=H(a,e,s);n[s]?(n[s].p(i,f),g(n[s],1)):(n[s]=J(i),n[s].c(),g(n[s],1),n[s].m(t.parentNode,t))}for(oe(),s=e.length;s<n.length;s+=1)l(s);re()}},i(a){if(!o){for(let f=0;f<e.length;f+=1)g(n[f]);o=!0}},o(a){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);o=!1},d(a){a&&$(t),te(n,a)}}}function ve(r){let t=q("common.refresh")+"",o;return{c(){o=O(t)},l(e){o=R(e,t)},m(e,n){I(e,o,n)},p:m,d(e){e&&$(o)}}}function ye(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Ie(r){G(r);let t,o;return t=new ce({props:{content:r[16],language:r[2]?"json":"text",copyIconTitle:q("common.copy-icon-title"),copySuccessIconTitle:q("common.copy-success-icon-title")}}),{c(){k(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,n){w(t,e,n),o=!0},p(e,n){G(e);const l={};n&2&&(l.content=e[16]),n&4&&(l.language=e[2]?"json":"text"),t.$set(l)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){_(t.$$.fragment,e),o=!1},d(e){v(t,e)}}}function qe(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Ee(r){let t,o,e,n,l=q("workflows.no-workers-failure-message")+"",a,f;return o=new ie({}),{c(){t=j("div"),k(o.$$.fragment),e=W(),n=j("p"),a=O(l),this.h()},l(s){t=S(s,"DIV",{class:!0});var i=C(t);b(o.$$.fragment,i),e=L(i),n=S(i,"P",{});var y=C(n);a=R(y,l),y.forEach($),i.forEach($),this.h()},h(){B(t,"class","text-center")},m(s,i){I(s,t,i),w(o,t,null),D(t,e),D(t,n),D(n,a),f=!0},p:m,i(s){f||(g(o.$$.fragment,s),f=!0)},o(s){_(o.$$.fragment,s),f=!1},d(s){s&&$(t),v(o)}}}function Te(r){let t,o,e={ctx:r,current:null,token:null,hasCatch:!0,pending:Ee,then:ke,catch:he,value:14,error:20,blocks:[,,,]};return F(r[3],e),{c(){t=j("section"),e.block.c()},l(n){t=S(n,"SECTION",{});var l=C(t);e.block.l(l),l.forEach($)},m(n,l){I(n,t,l),e.block.m(t,e.anchor=null),e.mount=()=>t,e.anchor=null,o=!0},p(n,[l]){r=n,Z(e,r,l)},i(n){o||(g(e.block),o=!0)},o(n){for(let l=0;l<3;l+=1){const a=e.blocks[l];_(a)}o=!1},d(n){n&&$(t),e.block.d(),e.token=null,e=null}}}let je=!1;function Se(r,t,o){let e,n;U(r,_e,c=>o(8,e=c)),U(r,Y,c=>o(9,n=c));const{namespace:l,workflow:a,run:f}=n.params,s={id:a,runId:f};let i,y=$e({namespace:l,workflow:s}).then(c=>(o(0,i=i||c[0]),c)),d;const E=c=>{var u;o(1,d=ge({namespace:l,workflow:s,queryType:c},(u=n.data)===null||u===void 0?void 0:u.settings,e==null?void 0:e.accessToken))};let T=!0;function Q(c){i=c,o(0,i)}const N=()=>E(i),p=()=>o(2,T=!T);return r.$$.update=()=>{r.$$.dirty&1&&i&&E(i)},[i,d,T,y,E,Q,N,p]}class Ce extends M{constructor(t){super(),X(this,t,Se,Te,K,{})}}function De(r){let t,o;return t=new Ce({}),{c(){k(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,n){w(t,e,n),o=!0},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){_(t.$$.fragment,e),o=!1},d(e){v(t,e)}}}function Pe(r){let t,o,e,n;return t=new le({props:{title:`${q("workflows.queries-tab")} | ${r[1]}`,url:r[0].url.href}}),e=new ae({props:{$$slots:{default:[De]},$$scope:{ctx:r}}}),{c(){k(t.$$.fragment),o=W(),k(e.$$.fragment)},l(l){b(t.$$.fragment,l),o=L(l),b(e.$$.fragment,l)},m(l,a){w(t,l,a),I(l,o,a),w(e,l,a),n=!0},p(l,[a]){const f={};a&1&&(f.url=l[0].url.href),t.$set(f);const s={};a&4&&(s.$$scope={dirty:a,ctx:l}),e.$set(s)},i(l){n||(g(t.$$.fragment,l),g(e.$$.fragment,l),n=!0)},o(l){_(t.$$.fragment,l),_(e.$$.fragment,l),n=!1},d(l){l&&$(o),v(t,l),v(e,l)}}}function Ve(r,t,o){let e;U(r,Y,l=>o(0,e=l));const n=e.params.workflow;return[e,n]}class Ye extends M{constructor(t){super(),X(this,t,Ve,Pe,K,{})}}export{Ye as component};
