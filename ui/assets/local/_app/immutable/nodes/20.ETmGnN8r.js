import{s as Ee,e as p,t as E,a as b,b as u,d as m,f as k,g as f,h as g,j as h,k as le,l as s,n as M,v as D,c as Ie,o as nt,w as ct,N as ge,B as xe,x as et}from"../chunks/scheduler.LRpOgQOC.js";import{S as we,i as De,c as X,a as Y,m as Z,t as j,g as lt,b as F,e as rt,d as x}from"../chunks/index.dE1eZLcR.js";import{p as it}from"../chunks/stores.94z3PgvV.js";import{P as ft}from"../chunks/page-title.ZsHOm3Zs.js";import{t as V}from"../chunks/translate.HrioCK44.js";import{h as pt,u as ut}from"../chunks/await_block.4HnXJsya.js";import{f as Ne,t as mt,r as dt}from"../chunks/time-format.dneJ0Mpr.js";import{B as ht}from"../chunks/badge.zwL2z7Ws.js";import{T as vt}from"../chunks/toggle-switch.C3rOFOTl.js";import{T as _t}from"../chunks/tooltip.Xk7iz8CE.js";import{a as Be,d as $t}from"../chunks/batch-operations.taj3lkOe.js";import{C as tt}from"../chunks/card.Jmr4BLhA.js";import{L as bt}from"../chunks/link.EiruHOFN.js";import{k as at}from"../chunks/route-for.Arsz5Xkc.js";function gt(o){let e,a,t=V("batch.details")+"",r,l,i,n,c=V("batch.operation-type")+"",d,v,O,z=o[0].operationType+"",y,U,_,$,P=V("batch.identity")+"",S,A,T,L=o[0].identity+"",q,K,B,G,me=V("common.reason")+"",de,J,Q,ee=o[0].reason+"",fe,W,N,te,ae=V("common.start-time")+"",C,w,re,oe=Ne(o[0].startTime,o[1],{relative:o[2]})+"",ne,ve,H,ce,he=V("common.close-time")+"",pe,_e,ie,se=Ne(o[0].closeTime,o[1],{relative:o[2]})+"",Pe,Re,ue,$e,ye=V("batch.total-operations")+"",Fe,Ae,be,ke=Intl.NumberFormat("en-US").format(o[0].totalOperationCount)+"",Ve;return{c(){e=p("div"),a=p("p"),r=E(t),l=b(),i=p("div"),n=p("p"),d=E(c),v=b(),O=p("p"),y=E(z),U=b(),_=p("div"),$=p("p"),S=E(P),A=b(),T=p("p"),q=E(L),K=b(),B=p("div"),G=p("p"),de=E(me),J=b(),Q=p("p"),fe=E(ee),W=b(),N=p("div"),te=p("p"),C=E(ae),w=b(),re=p("p"),ne=E(oe),ve=b(),H=p("div"),ce=p("p"),pe=E(he),_e=b(),ie=p("p"),Pe=E(se),Re=b(),ue=p("div"),$e=p("p"),Fe=E(ye),Ae=b(),be=p("p"),Ve=E(ke),this.h()},l(R){e=u(R,"DIV",{class:!0});var I=m(e);a=u(I,"P",{});var Ue=m(a);r=k(Ue,t),Ue.forEach(f),l=g(I),i=u(I,"DIV",{class:!0});var ze=m(i);n=u(ze,"P",{class:!0});var He=m(n);d=k(He,c),He.forEach(f),v=g(ze),O=u(ze,"P",{class:!0});var Me=m(O);y=k(Me,z),Me.forEach(f),ze.forEach(f),U=g(I),_=u(I,"DIV",{class:!0});var Ce=m(_);$=u(Ce,"P",{class:!0});var Le=m($);S=k(Le,P),Le.forEach(f),A=g(Ce),T=u(Ce,"P",{class:!0});var qe=m(T);q=k(qe,L),qe.forEach(f),Ce.forEach(f),K=g(I),B=u(I,"DIV",{class:!0});var Te=m(B);G=u(Te,"P",{class:!0});var Ke=m(G);de=k(Ke,me),Ke.forEach(f),J=g(Te),Q=u(Te,"P",{class:!0});var Ge=m(Q);fe=k(Ge,ee),Ge.forEach(f),Te.forEach(f),W=g(I),N=u(I,"DIV",{class:!0});var je=m(N);te=u(je,"P",{class:!0});var Je=m(te);C=k(Je,ae),Je.forEach(f),w=g(je),re=u(je,"P",{class:!0});var Qe=m(re);ne=k(Qe,oe),Qe.forEach(f),je.forEach(f),ve=g(I),H=u(I,"DIV",{class:!0});var Oe=m(H);ce=u(Oe,"P",{class:!0});var We=m(ce);pe=k(We,he),We.forEach(f),_e=g(Oe),ie=u(Oe,"P",{class:!0});var Xe=m(ie);Pe=k(Xe,se),Xe.forEach(f),Oe.forEach(f),Re=g(I),ue=u(I,"DIV",{class:!0});var Se=m(ue);$e=u(Se,"P",{class:!0});var Ye=m($e);Fe=k(Ye,ye),Ye.forEach(f),Ae=g(Se),be=u(Se,"P",{class:!0});var Ze=m(be);Ve=k(Ze,ke),Ze.forEach(f),Se.forEach(f),I.forEach(f),this.h()},h(){h(n,"class","batch-operation-key svelte-z5po3c"),h(O,"class","batch-operation-value svelte-z5po3c"),h(i,"class","batch-operation-detail svelte-z5po3c"),h($,"class","batch-operation-key svelte-z5po3c"),h(T,"class","batch-operation-value svelte-z5po3c"),h(_,"class","batch-operation-detail svelte-z5po3c"),h(G,"class","batch-operation-key svelte-z5po3c"),h(Q,"class","batch-operation-value svelte-z5po3c"),h(B,"class","batch-operation-detail svelte-z5po3c"),h(te,"class","batch-operation-key svelte-z5po3c"),h(re,"class","batch-operation-value svelte-z5po3c"),h(N,"class","batch-operation-detail svelte-z5po3c"),h(ce,"class","batch-operation-key svelte-z5po3c"),h(ie,"class","batch-operation-value svelte-z5po3c"),h(H,"class","batch-operation-detail svelte-z5po3c"),h($e,"class","batch-operation-key svelte-z5po3c"),h(be,"class","batch-operation-value svelte-z5po3c"),h(ue,"class","batch-operation-detail svelte-z5po3c"),h(e,"class","flex flex-col gap-2")},m(R,I){le(R,e,I),s(e,a),s(a,r),s(e,l),s(e,i),s(i,n),s(n,d),s(i,v),s(i,O),s(O,y),s(e,U),s(e,_),s(_,$),s($,S),s(_,A),s(_,T),s(T,q),s(e,K),s(e,B),s(B,G),s(G,de),s(B,J),s(B,Q),s(Q,fe),s(e,W),s(e,N),s(N,te),s(te,C),s(N,w),s(N,re),s(re,ne),s(e,ve),s(e,H),s(H,ce),s(ce,pe),s(H,_e),s(H,ie),s(ie,Pe),s(e,Re),s(e,ue),s(ue,$e),s($e,Fe),s(ue,Ae),s(ue,be),s(be,Ve)},p(R,[I]){I&1&&z!==(z=R[0].operationType+"")&&M(y,z),I&1&&L!==(L=R[0].identity+"")&&M(q,L),I&1&&ee!==(ee=R[0].reason+"")&&M(fe,ee),I&7&&oe!==(oe=Ne(R[0].startTime,R[1],{relative:R[2]})+"")&&M(ne,oe),I&7&&se!==(se=Ne(R[0].closeTime,R[1],{relative:R[2]})+"")&&M(Pe,se),I&1&&ke!==(ke=Intl.NumberFormat("en-US").format(R[0].totalOperationCount)+"")&&M(Ve,ke)},i:D,o:D,d(R){R&&f(e)}}}function Et(o,e,a){let t,r;Ie(o,mt,i=>a(1,t=i)),Ie(o,dt,i=>a(2,r=i));let{operation:l}=e;return o.$$set=i=>{"operation"in i&&a(0,l=i.operation)},[l,t,r]}class kt extends we{constructor(e){super(),De(this,e,Et,gt,Ee,{operation:0})}}function It(o){let e=o[0].state+"",a;return{c(){a=E(e)},l(t){a=k(t,e)},m(t,r){le(t,a,r)},p(t,r){r&1&&e!==(e=t[0].state+"")&&M(a,e)},d(t){t&&f(a)}}}function ot(o){let e,a;return e=new _t({props:{top:!0,text:V("common.auto-refresh-tooltip",{interval:"5"}),$$slots:{default:[wt]},$$scope:{ctx:o}}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){Z(e,t,r),a=!0},p(t,r){const l={};r&34&&(l.$$scope={dirty:r,ctx:t}),e.$set(l)},i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function wt(o){let e,a;return e=new vt({props:{id:"batch-operation-auto-refresh",label:V("common.auto-refresh"),labelPosition:"left",checked:o[1]}}),e.$on("change",o[2]),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){Z(e,t,r),a=!0},p(t,r){const l={};r&2&&(l.checked=t[1]),e.$set(l)},i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function Dt(o){let e,a,t,r,l=V("batch.describe-page-title")+"",i,n,c,d,v,O=o[0].jobId+"",z,y,U;c=new ht({props:{type:o[3][o[0].state],$$slots:{default:[It]},$$scope:{ctx:o}}});let _=o[0].state==="Running"&&ot(o);return{c(){e=p("div"),a=p("div"),t=p("div"),r=p("h1"),i=E(l),n=b(),X(c.$$.fragment),d=b(),v=p("h2"),z=E(O),y=b(),_&&_.c(),this.h()},l($){e=u($,"DIV",{class:!0});var P=m(e);a=u(P,"DIV",{class:!0});var S=m(a);t=u(S,"DIV",{class:!0});var A=m(t);r=u(A,"H1",{class:!0});var T=m(r);i=k(T,l),T.forEach(f),n=g(A),Y(c.$$.fragment,A),A.forEach(f),d=g(S),v=u(S,"H2",{class:!0});var L=m(v);z=k(L,O),L.forEach(f),S.forEach(f),y=g(P),_&&_.l(P),P.forEach(f),this.h()},h(){h(r,"class","text-2xl"),h(t,"class","flex flex-row gap-2 max-sm:flex-col"),h(v,"class","text-sm"),h(a,"class","flex flex-col gap-2"),h(e,"class","flex items-center justify-between")},m($,P){le($,e,P),s(e,a),s(a,t),s(t,r),s(r,i),s(t,n),Z(c,t,null),s(a,d),s(a,v),s(v,z),s(e,y),_&&_.m(e,null),U=!0},p($,[P]){const S={};P&1&&(S.type=$[3][$[0].state]),P&33&&(S.$$scope={dirty:P,ctx:$}),c.$set(S),(!U||P&1)&&O!==(O=$[0].jobId+"")&&M(z,O),$[0].state==="Running"?_?(_.p($,P),P&1&&j(_,1)):(_=ot($),_.c(),j(_,1),_.m(e,null)):_&&(lt(),F(_,1,1,()=>{_=null}),rt())},i($){U||(j(c.$$.fragment,$),j(_),U=!0)},o($){F(c.$$.fragment,$),F(_),U=!1},d($){$&&f(e),x(c),_&&_.d()}}}function Pt(o,e,a){let t;Ie(o,Be,c=>a(1,t=c));let{operation:r}=e;const l=nt(),i=c=>{const{checked:d}=c.target;l("toggleAutoRefresh",{checked:d}),ct(Be,t=d,t)},n={Completed:"green",Running:"blue",Failed:"red",Unspecified:"gray"};return o.$$set=c=>{"operation"in c&&a(0,r=c.operation)},[r,t,i,n]}class Vt extends we{constructor(e){super(),De(this,e,Pt,Dt,Ee,{operation:0})}}function zt(o){let e,a,t=V("batch.results")+"",r,l,i,n,c,d=V("batch.operations-progress",{percent:o[3]})+"",v,O,z,y=Intl.NumberFormat("en-US").format(o[0].completeOperationCount)+"",U,_,$=Intl.NumberFormat("en-US").format(o[0].totalOperationCount)+"",P,S,A,T,L,q,K,B,G=V("batch.operations-succeeded",{count:o[0].completeOperationCount})+"",me,de,J,Q=V("batch.operations-failed",{count:o[0].failureOperationCount})+"",ee,fe,W,N,te,ae;return{c(){e=p("div"),a=p("p"),r=E(t),l=b(),i=p("div"),n=p("div"),c=p("span"),v=E(d),O=b(),z=p("span"),U=E(y),_=E(" / "),P=E($),S=b(),A=p("div"),T=p("div"),L=b(),q=p("div"),K=p("div"),B=p("span"),me=E(G),de=b(),J=p("span"),ee=E(Q),fe=b(),W=p("div"),N=p("div"),te=b(),ae=p("div"),this.h()},l(C){e=u(C,"DIV",{class:!0});var w=m(e);a=u(w,"P",{});var re=m(a);r=k(re,t),re.forEach(f),l=g(w),i=u(w,"DIV",{});var oe=m(i);n=u(oe,"DIV",{class:!0});var ne=m(n);c=u(ne,"SPAN",{class:!0});var ve=m(c);v=k(ve,d),ve.forEach(f),O=g(ne),z=u(ne,"SPAN",{class:!0});var H=m(z);U=k(H,y),_=k(H," / "),P=k(H,$),H.forEach(f),ne.forEach(f),S=g(oe),A=u(oe,"DIV",{class:!0});var ce=m(A);T=u(ce,"DIV",{class:!0,style:!0}),m(T).forEach(f),ce.forEach(f),oe.forEach(f),L=g(w),q=u(w,"DIV",{});var he=m(q);K=u(he,"DIV",{class:!0});var pe=m(K);B=u(pe,"SPAN",{class:!0});var _e=m(B);me=k(_e,G),_e.forEach(f),de=g(pe),J=u(pe,"SPAN",{class:!0});var ie=m(J);ee=k(ie,Q),ie.forEach(f),pe.forEach(f),fe=g(he),W=u(he,"DIV",{class:!0});var se=m(W);N=u(se,"DIV",{style:!0,class:!0}),m(N).forEach(f),te=g(se),ae=u(se,"DIV",{style:!0,class:!0}),m(ae).forEach(f),se.forEach(f),he.forEach(f),w.forEach(f),this.h()},h(){h(c,"class","text-xs font-semibold"),h(z,"class","text-xs font-semibold"),h(n,"class","flex justify-between"),h(T,"class","absolute left-0 flex h-full items-center bg-indigo-600"),ge(T,"width",o[3]+"%"),h(A,"class","relative h-2 w-full overflow-hidden rounded bg-indigo-100"),h(B,"class","text-xs font-semibold text-green-700"),h(J,"class","text-xs font-semibold"),xe(J,"text-red-700",o[2]>0),h(K,"class","flex justify-between"),ge(N,"width",o[1]+"%"),h(N,"class","absolute left-0 flex h-full items-center bg-green-200"),ge(ae,"width",o[2]+"%"),h(ae,"class","absolute right-0 flex h-full items-center justify-end bg-red-200"),h(W,"class","relative h-2 w-full overflow-hidden rounded"),h(e,"class","flex flex-col gap-4")},m(C,w){le(C,e,w),s(e,a),s(a,r),s(e,l),s(e,i),s(i,n),s(n,c),s(c,v),s(n,O),s(n,z),s(z,U),s(z,_),s(z,P),s(i,S),s(i,A),s(A,T),s(e,L),s(e,q),s(q,K),s(K,B),s(B,me),s(K,de),s(K,J),s(J,ee),s(q,fe),s(q,W),s(W,N),s(W,te),s(W,ae)},p(C,[w]){w&8&&d!==(d=V("batch.operations-progress",{percent:C[3]})+"")&&M(v,d),w&1&&y!==(y=Intl.NumberFormat("en-US").format(C[0].completeOperationCount)+"")&&M(U,y),w&1&&$!==($=Intl.NumberFormat("en-US").format(C[0].totalOperationCount)+"")&&M(P,$),w&8&&ge(T,"width",C[3]+"%"),w&1&&G!==(G=V("batch.operations-succeeded",{count:C[0].completeOperationCount})+"")&&M(me,G),w&1&&Q!==(Q=V("batch.operations-failed",{count:C[0].failureOperationCount})+"")&&M(ee,Q),w&4&&xe(J,"text-red-700",C[2]>0),w&2&&ge(N,"width",C[1]+"%"),w&4&&ge(ae,"width",C[2]+"%")},i:D,o:D,d(C){C&&f(e)}}}function Ct(o,e,a){let{operation:t}=e,r,l,i;return o.$$set=n=>{"operation"in n&&a(0,t=n.operation)},o.$$.update=()=>{if(o.$$.dirty&1){const{completeOperationCount:n,failureOperationCount:c,totalOperationCount:d}=t;a(1,r=Math.round(n/d*100)),a(2,l=Math.round(c/d*100)),a(3,i=Math.round((n+c)/d*100))}},[t,r,l,i]}class Tt extends we{constructor(e){super(),De(this,e,Ct,zt,Ee,{operation:0})}}function jt(o){let e=V("batch.back-link")+"",a;return{c(){a=E(e)},l(t){a=k(t,e)},m(t,r){le(t,a,r)},p:D,d(t){t&&f(a)}}}function Ot(o){return{c:D,l:D,m:D,p:D,i:D,o:D,d:D}}function St(o){let e,a,t,r,l,i;return e=new Vt({props:{operation:o[7]}}),e.$on("toggleAutoRefresh",o[2]),t=new tt({props:{$$slots:{default:[Nt]},$$scope:{ctx:o}}}),l=new tt({props:{$$slots:{default:[Rt]},$$scope:{ctx:o}}}),{c(){X(e.$$.fragment),a=b(),X(t.$$.fragment),r=b(),X(l.$$.fragment)},l(n){Y(e.$$.fragment,n),a=g(n),Y(t.$$.fragment,n),r=g(n),Y(l.$$.fragment,n)},m(n,c){Z(e,n,c),le(n,a,c),Z(t,n,c),le(n,r,c),Z(l,n,c),i=!0},p(n,c){const d={};c&256&&(d.$$scope={dirty:c,ctx:n}),t.$set(d);const v={};c&256&&(v.$$scope={dirty:c,ctx:n}),l.$set(v)},i(n){i||(j(e.$$.fragment,n),j(t.$$.fragment,n),j(l.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),F(t.$$.fragment,n),F(l.$$.fragment,n),i=!1},d(n){n&&(f(a),f(r)),x(e,n),x(t,n),x(l,n)}}}function Nt(o){let e,a;return e=new kt({props:{operation:o[7]}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){Z(e,t,r),a=!0},p:D,i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function Rt(o){let e,a;return e=new Tt({props:{operation:o[7]}}),{c(){X(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,r){Z(e,t,r),a=!0},p:D,i(t){a||(j(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function Ft(o){return{c:D,l:D,m:D,p:D,i:D,o:D,d:D}}function st(o){let e,a,t={ctx:o,current:null,token:null,hasCatch:!1,pending:Ft,then:St,catch:Ot,value:7,blocks:[,,,]};return pt(o[3](),t),{c(){e=et(),t.block.c()},l(r){e=et(),t.block.l(r)},m(r,l){le(r,e,l),t.block.m(r,t.anchor=l),t.mount=()=>e.parentNode,t.anchor=e,a=!0},p(r,l){o=r,ut(t,o,l)},i(r){a||(j(t.block),a=!0)},o(r){for(let l=0;l<3;l+=1){const i=t.blocks[l];F(i)}a=!1},d(r){r&&f(e),t.block.d(r),t.token=null,t=null}}}function At(o){let e,a,t,r,l=o[1],i;t=new bt({props:{href:at({namespace:o[0]}),icon:"chevron-left",$$slots:{default:[jt]},$$scope:{ctx:o}}});let n=st(o);return{c(){e=p("div"),a=p("div"),X(t.$$.fragment),r=b(),n.c(),this.h()},l(c){e=u(c,"DIV",{class:!0});var d=m(e);a=u(d,"DIV",{class:!0});var v=m(a);Y(t.$$.fragment,v),v.forEach(f),r=g(d),n.l(d),d.forEach(f),this.h()},h(){h(a,"class","flex flex-row"),h(e,"class","flex flex-col gap-4")},m(c,d){le(c,e,d),s(e,a),Z(t,a,null),s(e,r),n.m(e,null),i=!0},p(c,[d]){const v={};d&1&&(v.href=at({namespace:c[0]})),d&256&&(v.$$scope={dirty:d,ctx:c}),t.$set(v),d&2&&Ee(l,l=c[1])?(lt(),F(n,1,1,D),rt(),n=st(c),n.c(),j(n,1),n.m(e,null)):n.p(c,d)},i(c){i||(j(t.$$.fragment,c),j(n),i=!0)},o(c){F(t.$$.fragment,c),F(n),i=!1},d(c){c&&f(e),x(t),n.d(c)}}}function Bt(o,e,a){let t;Ie(o,Be,v=>a(6,t=v));let{namespace:r}=e,{jobId:l}=e,i=0,n;const c=v=>{v.detail.checked?a(1,i+=1):n&&window.clearTimeout(n)},d=()=>$t({jobId:l,namespace:r}).then(v=>(t&&v.state==="Running"&&(n=window.setTimeout(()=>{a(1,i+=1)},5e3)),v));return o.$$set=v=>{"namespace"in v&&a(0,r=v.namespace),"jobId"in v&&a(4,l=v.jobId)},[r,i,c,d,l]}class yt extends we{constructor(e){super(),De(this,e,Bt,At,Ee,{namespace:0,jobId:4})}}function Ut(o){let e,a,t,r;return e=new ft({props:{title:V("batch.describe-page-title")+" | "+o[0]}}),t=new yt({props:{jobId:o[0],namespace:o[1]}}),{c(){X(e.$$.fragment),a=b(),X(t.$$.fragment)},l(l){Y(e.$$.fragment,l),a=g(l),Y(t.$$.fragment,l)},m(l,i){Z(e,l,i),le(l,a,i),Z(t,l,i),r=!0},p(l,[i]){const n={};i&1&&(n.title=V("batch.describe-page-title")+" | "+l[0]),e.$set(n);const c={};i&1&&(c.jobId=l[0]),i&2&&(c.namespace=l[1]),t.$set(c)},i(l){r||(j(e.$$.fragment,l),j(t.$$.fragment,l),r=!0)},o(l){F(e.$$.fragment,l),F(t.$$.fragment,l),r=!1},d(l){l&&f(a),x(e,l),x(t,l)}}}function Ht(o,e,a){let t,r,l;return Ie(o,it,i=>a(2,l=i)),o.$$.update=()=>{o.$$.dirty&4&&a(1,t=l.params.namespace),o.$$.dirty&4&&a(0,r=l.params.jobId)},[r,t,l]}class aa extends we{constructor(e){super(),De(this,e,Ht,Ut,Ee,{})}}export{aa as component};
